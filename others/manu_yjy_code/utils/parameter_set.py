import numpy as np 

def Size_set(input_str = {'filetype': '.sdpc',# .svs .sdpc .mrxs
                 'level': 0,
                 'read_size_model1_resolution': (1936, 1216), #1936 1216 横 model1_resolution下
                 'scan_over': (120, 120),
                 'model1_input': (512, 512, 3),
                 'model2_input': (256, 256, 3),
                 'model1_resolution':0.586,
                 'model2_resolution':0.293,
                 'input_resolution':0.179,
                 'cut':'5*3'}):
    
    level = input_str['level']
    sizepatch_read = tuple(np.uint32(np.dot(input_str['read_size_model1_resolution'],input_str['model1_resolution']/input_str['input_resolution'])))
    widthOverlap = tuple(np.uint32(np.dot(input_str['scan_over'],input_str['model1_resolution']/input_str['input_resolution'])))
    sizepatch_small1 = tuple(np.uint32(np.dot(input_str['model1_input'][:-1],input_str['model1_resolution']/input_str['input_resolution'])))
    sizepatch_small2 = tuple(np.uint32(np.dot(input_str['model2_input'][:-1],input_str['model2_resolution']/input_str['input_resolution'])))
    # predict size
    sizepatch_predict_model1 = input_str['read_size_model1_resolution']
    sizepatch_predict_model2 = tuple(np.uint32(np.dot(input_str['read_size_model1_resolution'],input_str['model1_resolution']/input_str['model2_resolution'])))
    sizepatch_predict_small1 = input_str['model1_input'][:-1]
    sizepatch_predict_small2 = input_str['model2_input'][:-1]
    num_w = int(input_str['cut'].split('*')[0])
    num_h = int(input_str['cut'].split('*')[1])
    widthOverlap_predict_w = np.ceil(sizepatch_predict_small1[0]-(sizepatch_predict_model1[0]-sizepatch_predict_small1[0])/(num_w-1))
    widthOverlap_predict_h = np.ceil(sizepatch_predict_small1[1]-(sizepatch_predict_model1[1]-sizepatch_predict_small1[1])/(num_h-1))
    widthOverlap_predict = (int(widthOverlap_predict_w),int(widthOverlap_predict_h))
    if input_str['filetype'] == '.mrxs':
        levelratio = 2
    else :
        levelratio = 4
    print("处理TCT来自— {} level={} \n".format(input_str['filetype'],level))
    print("读入图片大小:{}\n冗余扫描:{}\nmodel1:{}\nmodel2:{}\n".format(sizepatch_read,widthOverlap, sizepatch_small1, sizepatch_small2))
    print("最终图片大小_model1:{}\n最终图片大小_model2:{}\nmodel1:{}\nmodel2:{}\n冗余裁切:{}\n".format(sizepatch_predict_model1, sizepatch_predict_model2, sizepatch_predict_small1, sizepatch_predict_small2, widthOverlap_predict))
    print("裁切成— 列{} * 行{}\n".format(num_w,num_h))
    
    size_set = {'sizepatch_read':sizepatch_read,
                'widthOverlap':widthOverlap,
                'sizepatch_small1':sizepatch_small1,
                'sizepatch_small2':sizepatch_small2,
                'sizepatch_predict_model1':sizepatch_predict_model1,
                'sizepatch_predict_model2':sizepatch_predict_model2,
                'sizepatch_predict_small1':sizepatch_predict_small1,
                'sizepatch_predict_small2':sizepatch_predict_small2,
                'widthOverlap_predict':widthOverlap_predict,
                'filetype':input_str['filetype'],
                'level':input_str['level'],
                'levelratio':levelratio}
    return size_set

def TCT_set():
    pathfolder_svs_set = {'3d1':
                     ['H:/TCTDATA/Shengfuyou_1th/Positive/',
                      'H:/TCTDATA/Shengfuyou_1th/GoldTest/',
                      'H:/TCTDATA/Shengfuyou_1th/Negative/'],
                      '3d2':
                     ['H:/TCTDATA/Shengfuyou_2th/Positive/',
                      'H:/TCTDATA/Shengfuyou_2th/Negative/'],
                      '3d3':
                     ['H:/TCTDATA/Shengfuyou_3th/Positive/',
                      'H:/TCTDATA/Shengfuyou_3th/Negative/'],
                      'tongji':
                     ['H:/TCTDATA/tongji_1th/Positive/20180418/',
                      'H:/TCTDATA/tongji_1th/Positive/20180419/',
                      'H:/TCTDATA/tongji_1th/Positive/20180420p1/20180420p-1/',
                      'H:/TCTDATA/tongji_1th/Positive/20180420p1/20180420p-2/',
                      'H:/TCTDATA/tongji_1th/Negative/20180420n-1/',
                      'H:/TCTDATA/tongji_1th/Negative/20180420n-2/'],
                     '20x':
                     ['H:/TCTDATA/our/Positive/Shengfuyou_3th/',
                      'H:/TCTDATA/our/Positive/Shengfuyou_4th/',
                      'H:/TCTDATA/our/Positive/Shengfuyou_5th/svs-20/',
                      'H:/TCTDATA/our/Negative/ShengFY-N-L240(origin date)/'],
                      '10x':
                     ['H:/TCTDATA/our/10x/Positive/2018/',
                      'H:/TCTDATA/our/10x/Positive/unsure/',
                      'H:/TCTDATA/our/10x/Positive/ShengFY-P-L240 (origin date)/',
                      'H:/TCTDATA/our/Positive/Shengfuyou_5th/svs-10/',
                      'H:/TCTDATA/our/10x/Negative/ShengFY-N-L240 (origin date)/'],
                     'SZ':
                     ['H:/TCTDATA/shenzhenhuaqiang/'],
                     'our_dyetest_10x':
                     ['H:/TCTDATA/our_dyetest/10x/'],
                     'our_dyetest_20x':
                     ['H:/TCTDATA/our_dyetest/20x/'],
                     'szsq_svs':
                     ['H:/TCTDATA/szsq/Shengfuyou_3th/Positive_40x/',
                      'H:/TCTDATA/szsq/Shengfuyou_3th/Negative_40x/',
                      'H:/TCTDATA/szsq/Shengfuyou_5th/',
                      'H:/TCTDATA/szsq/Shengfuyou_7th/positive/',
                      'H:/TCTDATA/szsq/Shengfuyou_7th/negative/',
                      'H:/TCTDATA/szsq/Tongji_3th/positive/tongji_3th_positive_40x/',
                      'H:/TCTDATA/szsq/Tongji_3th/negative/tongji_3th_negtive_40x/'],
                     'szsq_sdpc':
                     ['H:/TCTDATA/SZSQ_originaldata/Shengfuyou_3th/positive/Shengfuyou_3th_positive_40X/',
                      'H:/TCTDATA/SZSQ_originaldata/Shengfuyou_3th/negative/Shengfuyou_3th_negative_40X/',
                      'H:/TCTDATA/SZSQ_originaldata/Shengfuyou_5th/positive/sfy5_21/',
                      'H:/TCTDATA/SZSQ_originaldata/Shengfuyou_7th/positive/Shengfuyou_7th_positive_40x/',
                      'H:/TCTDATA/SZSQ_originaldata/Shengfuyou_7th/negative/Shengfuyou_7th_negative_40x/',
                      'H:/TCTDATA/SZSQ_originaldata/Tongji_3th/positive/tongji_3th_positive_40x/',
                      'H:/TCTDATA/SZSQ_originaldata/Tongji_3th/negative/tongji_3th_negtive_40x/',
                      'H:/TCTDATA/SZSQ_originaldata/Tongji_4th/positive/',
                      'H:/TCTDATA/SZSQ_originaldata/Tongji_4th/negative/',
                      ]}
    testfile_set = {'Shengfuyou_4th':
                    ['1615888 2226197',
                     '1615953 2226091',
                     '1615696 2226213',
                     '1615128 2226033',
                     '1615231 2226181',
                     '1615267 2226013',
                     '1615786 2226124',
                     '1615768 2226131',
                     '1615650 2226014',
                     '1615683 2226169',
                     '1615355 2226067',
                     '1615119 2226251',
                     '1615361 2226106',
                     '1615334 2226096',
                     '1615151 2226146',
                     '1615259 2226231',
                     '1615741 2226201',
                     '1164967 0893031',
                     '1615795 2226065',
                     '1615410 2226052',
                     '1157214 0893115',
                     '1615760 2226156',
                     '1615993 2226193',
                     '1615887 2226245',
                     '1157195 0893155',
                     '1615902 2226204',
                     '1615959 2226152',
                     '1615919 2226238',
                     '1615547 2226196',
                     '1615450 2226066',
                     '1157108 0893020',
                     '1164334 0893013',
                     '1615373 2226057',
                     '1157250 0893152',
                     '1615749 2226214',
                     '1157265 0893223',
                     '1177430 0893178',
                     '1165441 0893036',
                     '1615512 2226206',
                     '1157240 0893023',
                     '1164444 0893061'],
                    'testfile240 ':
                    ['1149531',
                     '1154896',
                     '1159715',
                     '1161421',
                     '1161645',
                     '1162026',
                     '1179935',
                     '1179944',
                     '1159977',
                     '1159646',
                     '1162017',
                     '1136007',
                     '1161688',
                     '1161394',
                     '1179435',
                     '1179383',
                     '1179676',
                     '1179551',
                     '1180006',
                     '1159936',
                     '1150002'],
                     '2018':
                    ['1160655',
                     '1163605',
                     '1179380',
                     '1169519',
                     '1163234',
                     '1166950',
                     '1166803',
                     '1168804',
                     '1179415']}
    return pathfolder_svs_set, testfile_set

test_sample = {
        'test_p_sfy1':[
                '1121830 0893129', 
                '161241qiuxiangguanAscus 19',
                '01',
                '16010620 aocuie Ascus 5',
                '1107554 0893127',
                '24',
                '1109395 0893194',
                '718likehuiH13',
                '1109443 0893100',
                '1110082 0893130',
                '13032118guojuanH9',
                '16010164lijuanAscus 2',
                '1124999 0893044',
                '1108536 0893153',
                '1112927 0893100',
                '22',
                '15100117huyiH15',
                '1110307 0893247',
                '1108271 0893050',
                '1109807 0893002'],

    'test_p_sfy2':[
            '100_0001003 2008208',
            '100_1160542 0893157',
            '100_1141369 0893134',
            '69_1158241 0893014',
            '100_1160260 0893136',
            '100_1160991 0893183',
            '100_1142786 0893148',
            '100_1158898 0893051',
            '69_1143284 0893028',
            '100_0002604 2008048',
            '100_0000331 2008056',
            '100_1160904 0893039',
            '69_1142307 0893142',
            '69_1144886 0893069',
            '100_0070369 1009075',
            '100_0000017 2008040',
            '100_1142799 0893043',
            '69_1138839 0893122',
            '100_1143298 0893017',
            '100_1158950 0893144'],

    'test_n_sfy1':[
            '0067387 1009163',
            '0067330 1009212',
            '0067327 1009116',
            '0067337 1009251',
            '0067326 1009026',
            '0067315 1009028',
            '0067328 1009068',
            '0067316 1009174',
            '0067413 1009175',
            '0067404 1009015',
            '0067418 1009002',
            '0067317 1009192',
            '0067408 1009141',
            '1140102 0893192',
            '0067437 1009009',
            '0067325 1009168',
            '1140106 0893093',
            '0067385 1009127',
            '0067421 1009199',
            '0067390 1009003'],

    'test_n_sfy2':[
            '0423_4M11',
            '0423_2M12',
             '0418_3M07',
             '0418_4M12',
             '0424_2M03',
             '0418_3M20',
             '0424_3M02',
             '0423_4M08',
             '0418_4M24',
             '0423_1M06',
             '0423_4M09',
             '0424_1M21',
             '0424_2M11',
             '0423_2M24',
             '0418_1M21',
             '0418_4M19',
             '0423_3M21',
             '0423_4M12',
             '0424_4M22',
             '0423_1M01',
             '0418_4M13',
             '0418_4M02',
             '0423_3M20',
             '0418_1M10',
             '0424_3M14',
             '0418_2M08',
             '0418_3M25',
             '0424_1M13',
             '0423_4M02',
             '0423_1M05',
             '0423_4M15-1',
             '0423_1M25',
             '0424_4M04',
             '0423_4M01',
             '0423_3M14',
             '0423_3M24',
             '0418_4M17',
             '0423_3M03',
             '0418_1M16',
             '0418_4M04',
             '0423_2M25',
             '0418_2M03',
             '0418_2M19',
             '0424_2M01',
             '0424_2M18',
             '0418_3M17',
             '0424_3M17',
             '0424_1M05',
             '0418_2M15',
             '0424_4M23',
             '0423_3M06',
             '0424_2M02',
             '0423_4M17',
             '0418_3M12',
             '0423_1M13',
             '0423_3M22',
             '0424_3M13',
             '0424_2M25',
             '0423_2M07',
             '0424_4M18',
             '0423_1M07',
             '0418_1M15',
             '0423_2M04',
             '0418_1M07',
             '0423_2M18',
             '0424_1M14',
             '0418_2M17',
             '0418_2M04',
             '0423_4M13',
             '0418_3M04',
             '0418_4M20',
             '0423_2M19',
             '0418_1M01',
             '0424_2M24',
             '0424_2M20',
             '0424_4M10',
             '0424_2M16',
             '0423_4M05',
             '0424_1M19',
             '0424_2M06',
             '0423_4M19',
             '0418_3M06',
             '0418_2M12_2',
             '0418_4M18',
             '0424_4M05',
             '0418_4M09',
             '0418_4M07',
             '0418_4M16',
             '0418_2M09',
             '0418_2M20',
             '0418_4M23',
             '0423_1M23',
             '0424_4M03',
             '0424_3M16',
             '0418_3M10',
             '0418_3M08',
             '0418_1M08',
             '0424_3M20',
             '0423_2M21',
             '0423_3M13'],

    'test_p_sfy3':[
            '1149531',
            '1154896',
            '1159715',
            '1161421',
            '1161645',
            '1162026',
            '1179935',
            '1179944',
            '1160655',
            '1163605',
            '1179380',
            '2018-10-26-144149-716',
            '2018-10-26-145844-589',
            '2018-11-01-203533-337',
            '2018-11-01-211611-262'],
            
            
    'test_p_sfy4':[
            '1615888 2226197',
            '1615953 2226091',
            '1615119 2226251',
            '1615334 2226096',
            '1615259 2226231',
            '1164967 0893031',
            '1615151 2226146',
            '1615741 2226201',
            '1615795 2226065',
            '1157214 0893115',
            '1615993 2226193',
            '1615959 2226152',
            '1615547 2226196',
            '1157108 0893020',
            '1615373 2226057',
            '1615512 2226206'],
            
    'test_p_sfy5':[
            '1152412 0893203',
            '1152435 0893223',
            '1152440 0893238',
            '1152449 0893159',
            '1152737 0893105',
            '1152878 0893200',
            '1615231 2226181-1',
            '1615683 2226169',
            '1615768 2226131',
            '1615861 2226021'], 
        
    'test_n_sfy3':[
            '1159887',
            '1159881',
            '1159998',
            '1160001',
            '1160020',
            '1160026',
            '1160033',
            '1179592',
            '1179599',
            '1179565',
            '1179568'],
    
    'test_p_tongji4':[
            'tj190506604',
            'tj190513311-1087981',
            'tj190408604',
            'tj190517620',
            'tj190408610',
            'tj190401606',
            'tj190514602',
            'tj190508615',
            'tj19042017-1071688',
            'tj19051065-1084179',
            'tj19041643-1058455',
            'tj190523321-1091791',
            'tj190401303-1066384'
            'tj190506606',
            'tj19042018-1060136',
            'tj19042818-1072196',
            'tj190403601',
            'tj190510103-1085484',
            'tj190513609',
            'tj190423603',
            'tj190408601',
            'tj190520306-1094630',
            'tj190401612',
            'tj190505604',
            'tj190503607',
            'tj19041716-1072982',
            'tj19052120-1085215'],
    
    'test_p_tongji3':[
            '190320612',
            '190325602',
            '042910101',
            '1902286071',
            '190220624',
            '190218620',
            '19031456',
            '190318624',
            '190313612',
            '190326602',
            '190228604',
            '190301605',
            '190301619',
            '19031440',
            '190325616',
            '190306618',
            '19032664',
            '190228606',
            '190315309',
            '190301608',
            '190327608',
            '190326320',
            '190329320',
            '190220614',
            '190222802',
            '19030739',
            '190315617',
            ]}